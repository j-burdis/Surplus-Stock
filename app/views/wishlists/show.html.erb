<div class="p-4 flex flex-col lg:flex-row">
  <div class="w-full lg:w-1/2">
    <h1 class="font-bold text-3xl p-1">My Wishlist</h1>
    <% if @wishlist_items.any? %>
      <% @wishlist_items.each do |wishlist_item| %>
        <div class="flex items-center bg-slate-50 drop-shadow m-2">
          <%= link_to item_path(wishlist_item.item) do %>
            <img src="<%= wishlist_item.item.image_url %>" class="w-28 p-1 mr-2">
          <% end %>
          <div class="flex justify-between flex-grow mr-2">
            <div class="flex flex-col grow">
              <p class="pt-2">
                <%= link_to item_path(wishlist_item.item) do %>
                  <%= wishlist_item.item.name %>
                <% end %>
              </p>
              <p class="py-2">
                Â£<%= wishlist_item.item.price %> per unit
              </p>

              <div class="flex justify-between items-center pb-2">
                <div>
                  <div class="w-full flex justify-between items-center" data-controller="basket">
                    <%= form_with url: basket_items_path(item_id: wishlist_item.item.id), 
                          method: :post, class: 'flex items-center',
                          data: { action: "submit->basket#submitForm" } do |form| %>
                      <div class="flex">
                        <p>Quantity:&nbsp;</p>
                        <input type="number"
                              name="quantity"
                              value="1"
                              min="1"
                              max="<%= wishlist_item.item.stock %>"
                              class="w-16 bg-slate-50"
                              data-basket-target="quantityInput"
                              data-action="input->basket#updateHiddenQuantity">
                      </div>
                      <%= form.hidden_field :quantity, 
                          data: { basket_target: "hiddenQuantity" } %>
                      <%= form.submit "Add to basket", class: 'ml-2 cursor-pointer' %>
                    <% end %>
                  </div>
                </div>
                <div>
                  <%= button_to 'Remove',
                      wishlist_item_path(wishlist_item),
                      method: :delete,
                      data: { confirm: 'Are you sure?' } %>
                </div>
              </div>
            </div>
            
          </div>
        </div>
      <% end %>

    <% else %>
      <p class="text-center mt-4">Your Wishlist is empty</p>
    <% end %>
    <%= link_to 'Continue Shopping', items_path %>
  </div>

  <div class="w-full lg:w-1/2">
    <h1 class="font-bold text-3xl p-1">Another section</h1>
  </div>
</div>